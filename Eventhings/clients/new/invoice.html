<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Google fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap" rel="stylesheet">


  <link rel="stylesheet" href="unpkg.com/leaflet%401.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/vendors.css">
  <link rel="stylesheet" href="css/main.css">

  <style>


  </style>

  <title>Eentiix</title>
</head>


<body class="" data-barba="wrapper">

    <!-- preloader start -->
    <div class="preloader js-preloader"></div>
    <!-- preloader end -->
    <!-- cursor start -->
    <div class="cursor js-cursor">
        <div class="cursor__wrapper">
            <div class="cursor__follower js-follower"></div>
            <div class="cursor__label js-label"></div>
            <div class="cursor__icon js-icon"></div>
            <div class="cursor__slider_icon js-slider-icon">
                <svg width="52" height="24" viewBox="0 0 52 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M37 18L43 12L37 6" stroke="white" stroke-width="2.66667" stroke-linecap="round" stroke-linejoin="round" />
                    <path d="M15 18L9 12L15 6" stroke="white" stroke-width="2.66667" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </div>
        </div>
    </div>
    <!-- cursor end -->
    <!-- barba container start -->
    <div class="barba-container" data-barba="container">


        <main class="main-content  ">


            <div class="content-wrapper  js-content-wrapper">


                <section class="layout-pt-lg layout-pb-lg bg-light-4">
                    <div class="container sm:px-0">
                        <div class="row justify-end sm:justify-center sm:mt-48">
                            <div class="col-auto">
                                <button class="button -md -accent text-white -uppercase" id="btnPay" name="btnPay">Proceed to payment</button>
                            </div>
                        </div>

                        <div class="bg-white shadow-card rounded-8 pt-50 md:pt-64 mt-60">
                            <div class="row y-gap-32 px-100 md:px-80 sm:px-24">
                                <div class="col-xl-3 col-lg-4">
                                    <a data-barba href="index.html">
                                        <img src="img/general/logo.svg" alt="logo">
                                    </a>
                                </div>

                                <div class="col-lg-4 offset-lg-4 pt-12">
                                    <div class="d-flex justify-between">
                                        
                                        <p class="text-25 fw-600">
                                            <script type="text/javascript">
                                                document.write("#" + Math.floor(Math.random() * 10000000) + 1)
                                            </script>
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div class="row y-gap-32 pt-10 px-100 md:px-80 sm:px-24">
                                <div class="col-xl-3 col-lg-4">
                                    <p>Invoice date:</p>
                                    <p class="text-lg fw-600">
                                        <script type="text/javascript">document.write(new Date().toUTCString())</script>
                                    </p>
                                </div>

                                <div class="col-lg-4 offset-lg-4">
                                    <p>Due date:</p>
                                    <p class="text-lg fw-600">
                                        <script type="text/javascript">document.write(new Date().toUTCString())</script>
                                    </p>
                                </div>
                            </div>

                            <div class="row y-gap-32 pt-10 px-100 md:px-80 sm:px-24">
                                <div class="col-xl-3 col-lg-4">
                                    <p class="text-2xl fw-600">Supplier</p>
                                    <p class="mt-16">www.eventiix.com</p>
                                    <p class="">Ikoyi, Lagos, Nigeria</p>
                                </div>

                                <div class="col-lg-4 offset-lg-4">
                                    <p class="text-2xl fw-600">Customer Details</p>
                                    <p class="mt-16">
                                        <script type="text/javascript">document.write(JSON
                                                .parse(sessionStorage.getItem('user')).full_name)</script>
                                    </p>
                                    <p class="">
                                        <script type="text/javascript">document.write(JSON
                                                .parse(sessionStorage.getItem('user')).email_address)</script>
                                    </p>
                                    <p class="">
                                        <script type="text/javascript">document.write(JSON
                                                .parse(sessionStorage.getItem('user')).phone_number)</script>
                                    </p>
                                </div>
                            </div>

                            <div class="row y-gap-32 pt-60 px-100 md:px-80 sm:px-0">
                                <div class="col-12">
                                    <table class="table" id="salesTable">
                                        <thead>
                                            <tr>
                                                <th>Event Name</th>
                                                <th>Price</th>
                                                <th>VAT (0%)</th>
                                                <th>Total</th>
                                            </tr>
                                        </thead>
                                        <!--<tbody>
        <tr>
            <td>Standard Plan</td>
            <td>$443.00</td>
            <td>$921.80</td>
            <td>$9243</td>
        </tr>
        <tr class="border-none">
            <td class="text-2xl fw-600 text-dark-1">Total Due</td>
            <td></td>
            <td></td>
            <td class="text-2xl fw-600 text-dark-1">$9,750</td>
        </tr>
    </tbody>-->
                                        <tbody id="salesTBody">
                                        </tbody>
                                    </table>
                                </div>
                            </div>


                            <div class="row px-16 mt-100">
                                <div class="col-12 py-48 border-top-dark">
                                    <div class="d-flex justify-center flex-wrap y-gap-16 x-gap-60">
                                        <a href="#">www.eventiix.com</a>
                                        <a href="#">lararawa@yahoo.co.uk</a>
                                        <a href="#">+234 803 880 4264</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>


            </div>
        </main>
    </div>
    <!-- barba container end -->
    <!-- JavaScript -->
    <script src="vendors/jquery/jquery.min.js"></script>
    <script src="cdn.jsdelivr.net/npm/atropos%401.0.1/atropos.js"></script>
    <script src="unpkg.com/leaflet%401.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    <script src="js/vendors.js"></script>
    <script src="js/main.js"></script>
    <script src="js/app.js"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>

    <script type="text/javascript">
        function GetEvents(id) {

            var data = {
                eventid: id
            };

            $.ajax({
                type: "POST",
                url: "/Services/events.asmx/GetById",
                data: JSON.stringify(data),
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                cache: false,
                success: function (response) {
                    console.log(response);

                    var responseData = (response.d !== null || response.d !== undefined) ? response.d : response;

                    if (responseData == undefined || responseData.status == '0') {
                        alert("Event specified can not found");
                        //$("#btnPay").prop('disabled', true);
                        document.getElementById("btnPay").setAttribute("disabled", "disabled");
                        return;
                    }

                    if (responseData.length < 1) {

                        $("#vendorSalesTBody").empty().append($('<tr><td colspan="5"> No sales data available for the selected vendor </td></tr>')/*.html("")*/);
                        return;
                    }

                    sessionStorage.setItem('amt', responseData.gate_fee);
                    sessionStorage.setItem('event_id', window.location.search.split('=')[1]);
                    $('#salesTBody').empty();
                    //$.each(responseData, function (i, val) {
                        let rows = `<tr>
                                            
                                            <td>${responseData.name}</td>
                                            <td>${responseData.gate_fee}</td>
                                            <td>0.00</td>
                                            <td>${responseData.gate_fee}</td>
                                        </tr>`
                        $('#salesTBody').append(rows);
                    //});
                        },
                beforeSend: function () {
                    
                },
                error: function (data) {
                    $("#lblErrorText").html("Error occured while submiting form");
                }
            });
        }

        $(document).ready(function () {
            
            GetEvents(window.location.search.split('=')[1]);

            $("#btnPay").click(function (e) {
                payWithPaystack(sessionStorage.getItem('amt'));
            })

        });
    </script>
</body>
</html>